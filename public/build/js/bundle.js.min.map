{"version":3,"sources":["app.js","buscador.js"],"names":["paso","pasoInicial","pasoFinal","cita","id","nombre","fecha","hora","servicios","inciarApp","mostrarSeccion","tabs","botonesPaginador","paginaSiguiente","paginaAnterior","consultarAPI","idCliente","nombreCliente","seleccionarFecha","seleccionarHora","mostrarResumen","seccionAnterior","document","querySelector","classList","remove","pasoSelector","add","tabAnterior","querySelectorAll","forEach","boton","addEventListener","e","parseInt","target","dataset","async","url","resultado","fetch","mostrarServicios","json","error","console","log","servicio","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","divServicio","some","agregado","filter","value","dia","Date","getUTCDay","includes","mostrarAlerta","split","mensaje","tipo","elemento","desaparece","alertaPrevia","alerta","setTimeout","resumen","firstChild","removeChild","Object","values","length","headingServicios","contenedorServicio","textoServicio","innerHTML","serviciosSeleccionados","map","suma","i","parseFloat","totalServicio","toFixed","contenedorTotalServicio","total","headingCita","fechaObj","mes","getMonth","getDate","year","getFullYear","fechaFormateada","UTC","toLocaleDateString","weekday","month","day","fechaCita","horaCita","botonReservar","reservarCita","idServicios","datos","FormData","append","respuesta","method","body","Swal","fire","icon","title","text","button","then","window","location","reload","iniciarApp","buscarPorFecha"],"mappings":"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","file":"bundle.js","sourcesContent":["let paso = 1;\r\nconst pasoInicial = 1;\r\nconst pasoFinal = 3;\r\n\r\nconst cita = {\r\n    id: '',\r\n    nombre: '',\r\n    fecha: '',\r\n    hora: '',\r\n    servicios: []\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function(){\r\n    inciarApp();\r\n});\r\n\r\nfunction inciarApp() {\r\n    mostrarSeccion(); // Muestra y oculta las secciones\r\n    tabs(); // Cambia la sección cuando se presionen los tabs\r\n    botonesPaginador(); // Agrega o quita los botones del paginador\r\n    paginaSiguiente();\r\n    paginaAnterior();\r\n\r\n    consultarAPI(); // Consulta la API en el backend de PHP\r\n\r\n    idCliente(); // Añade el id del cliente\r\n    nombreCliente(); // Añade el nombre del cliente al objeto de cita\r\n    seleccionarFecha(); // Añade la fecha de la cita en el objeto\r\n    seleccionarHora(); // Añade la hora de la cita en el objeto\r\n    mostrarResumen();\r\n}\r\n\r\nfunction mostrarSeccion() {\r\n\r\n    // Ocultar la sección que tenga la clase de mostrar\r\n    const seccionAnterior = document.querySelector('.mostrar');\r\n    if(seccionAnterior) {\r\n        seccionAnterior.classList.remove('mostrar');\r\n    }\r\n\r\n    // Seleccionar la sección con el paso...\r\n    const pasoSelector = `#paso-${paso}`;\r\n    const seccion = document.querySelector(pasoSelector);\r\n    seccion.classList.add('mostrar');\r\n\r\n    // Quita la clase de actual al tab anterior\r\n    const tabAnterior = document.querySelector('.actual');\r\n    if(tabAnterior) {\r\n        tabAnterior.classList.remove('actual');\r\n    }\r\n\r\n    // Resalta el tab actual\r\n    const tab = document.querySelector(`[data-paso=\"${paso}\"]`);\r\n    tab.classList.add('actual'); \r\n}\r\n\r\nfunction tabs() {\r\n    const botones = document.querySelectorAll('.tabs button');\r\n\r\n    //Recorrer los botones, cuando se usa querySelectorAll no se puede usar AddEventListener, solo funciona de manera individual\r\n    botones.forEach( boton => {\r\n        boton.addEventListener('click', function(e){\r\n            paso = parseInt(e.target.dataset.paso);\r\n            mostrarSeccion();\r\n            botonesPaginador();\r\n        });\r\n    });\r\n}\r\n\r\nfunction botonesPaginador() {\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n    if(paso === 1) {\r\n        paginaAnterior.classList.add('ocultar');\r\n        paginaSiguiente.classList.remove('ocultar');\r\n    } else if (paso === 3 ) {\r\n        paginaAnterior.classList.remove('ocultar');\r\n        paginaSiguiente.classList.add('ocultar');\r\n        mostrarResumen();\r\n    } else {\r\n        paginaAnterior.classList.remove('ocultar');\r\n        paginaSiguiente.classList.remove('ocultar');\r\n    }\r\n\r\n    mostrarSeccion();\r\n}\r\n\r\nfunction paginaAnterior(){\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    paginaAnterior.addEventListener('click', function(){\r\n        \r\n        if(paso <= pasoInicial) return; {\r\n            paso--;\r\n            botonesPaginador();\r\n        } \r\n    })\r\n}\r\n\r\nfunction paginaSiguiente() {\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n    paginaSiguiente.addEventListener('click', function(){\r\n\r\n        if(paso >= pasoFinal) return; {\r\n            paso++;\r\n            botonesPaginador();\r\n        }\r\n    })\r\n}\r\n\r\nasync function consultarAPI() {\r\n    try {\r\n        const url = 'http://localhost:3000/api/servicios';\r\n        const resultado = await fetch(url);\r\n        const servicios = await resultado.json();\r\n        mostrarServicios(servicios);\r\n\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction mostrarServicios(servicios) {\r\n    servicios.forEach( servicio => {\r\n        const {id, nombre, precio } = servicio;\r\n\r\n        const nombreServicio = document.createElement('P');\r\n        nombreServicio.classList.add('nombre-servicio');\r\n        nombreServicio.textContent = nombre;\r\n\r\n        const precioServicio = document.createElement('P');\r\n        precioServicio.classList.add('precio-servicio');\r\n        precioServicio.textContent = `$${precio}`;\r\n\r\n        const servicioDiv = document.createElement('DIV');\r\n        servicioDiv.classList.add('servicio');\r\n        servicioDiv.dataset.idServicio = id;\r\n        servicioDiv.onclick = function() {\r\n            seleccionarServicio(servicio);\r\n        }\r\n\r\n        servicioDiv.appendChild(nombreServicio);\r\n        servicioDiv.appendChild(precioServicio);\r\n\r\n        document.querySelector('#servicios').appendChild(servicioDiv);\r\n    });\r\n}\r\n\r\nfunction seleccionarServicio(servicio) {\r\n    const {id} = servicio;\r\n    const {servicios} = cita;\r\n\r\n    // Identificar el elemento al que se le da click\r\n    const divServicio = document.querySelector(`[data-id-servicio=\"${id}\"]`);\r\n\r\n    // Comprobar si un servicio ya fue agregado y quitarlo\r\n    if(servicios.some( agregado => agregado.id === id)) {\r\n        // Eliminar selección\r\n        cita.servicios = servicios.filter( agregado => agregado.id !== id);\r\n        divServicio.classList.remove('seleccionado');\r\n    } else {\r\n        // Agregar\r\n        cita.servicios = [...servicios, servicio]; // TODO: Con los tres puntos hago una copia del arreglo servicios \r\n        divServicio.classList.add('seleccionado');\r\n    }\r\n}\r\n\r\nfunction idCliente() {\r\n    cita.id = document.querySelector('#id').value;\r\n}\r\n\r\nfunction nombreCliente() {\r\n    cita.nombre = document.querySelector('#nombre').value;\r\n}\r\n\r\nfunction seleccionarFecha() {\r\n    const inputFecha = document.querySelector('#fecha');\r\n    inputFecha.addEventListener('input', function(e) {\r\n        \r\n        const dia = new Date(e.target.value).getUTCDay();\r\n\r\n        if([6, 0].includes(dia)) {\r\n            cita.fecha = e.target.value = '';\r\n            mostrarAlerta('Fines de semana no atendemos', 'error', '.formulario'); // TODO: Mostrar la alerta si incluye el número 6 o el 0, referentes a Sábado y Domingo \r\n        } else {\r\n            cita.fecha = e.target.value;\r\n        }\r\n    });\r\n}\r\n\r\nfunction seleccionarHora() {\r\n    const inputHora = document.querySelector('#hora');\r\n    inputHora.addEventListener('input', function(e) {\r\n        \r\n        const horaCita = e.target.value;\r\n        const hora = horaCita.split(\":\")[0];\r\n\r\n        if(hora < 8 || hora > 21) {\r\n            cita.hora = e.target.value = '';\r\n            mostrarAlerta('Hora no permitida', 'error', '.formulario');\r\n        } else {\r\n            cita.hora = e.target.value;\r\n        }\r\n    });\r\n}\r\n\r\nfunction mostrarAlerta(mensaje, tipo, elemento, desaparece = true) {\r\n    \r\n    const alertaPrevia = document.querySelector('.alerta');\r\n    \r\n    if(alertaPrevia) {\r\n        alertaPrevia.remove();\r\n    }\r\n\r\n    // TODO: Scripting para crear la alerta\r\n    const alerta = document.createElement('DIV');\r\n    alerta.textContent = mensaje;\r\n    alerta.classList.add('alerta');\r\n    alerta.classList.add(tipo);\r\n\r\n    const referencia = document.querySelector(elemento);\r\n    referencia.appendChild(alerta);\r\n\r\n    if(desaparece) {\r\n        setTimeout( () => {\r\n            alerta.remove();\r\n        }, 2000)\r\n    } \r\n}\r\n\r\nfunction mostrarResumen() {\r\n    const resumen = document.querySelector('.contenido-resumen');\r\n    const alertaPrevia = document.querySelector('.alerta');\r\n\r\n    // Limpiar el contenido de resumen\r\n    while(resumen.firstChild){\r\n        resumen.removeChild(resumen.firstChild);\r\n    }\r\n\r\n    if(Object.values(cita).includes('') || cita.servicios.length === 0) {\r\n        mostrarAlerta('Faltan datos de servicios, fecha u hora', 'error', '.contenido-resumen', false);\r\n        return;\r\n    } \r\n\r\n    if(alertaPrevia){\r\n        alertaPrevia.remove();\r\n    }\r\n\r\n    // Formatear el div de resumen\r\n    const { nombre, fecha, hora, servicios } = cita;\r\n\r\n\r\n    // Heading para servicios en Resumen\r\n    const headingServicios = document.createElement('H3');\r\n    headingServicios.textContent = \"Resumen de servicios\";\r\n    resumen.appendChild(headingServicios);\r\n\r\n    // Iterando y mostrando los servicios\r\n    servicios.forEach( servicio => {\r\n        \r\n        const {id, precio, nombre} = servicio;\r\n\r\n        const contenedorServicio = document.createElement('DIV');\r\n        contenedorServicio.classList.add('contenedor-servicio');\r\n\r\n        const textoServicio = document.createElement('P');\r\n        textoServicio.textContent = nombre;\r\n        \r\n        const precioServicio = document.createElement('P');\r\n        precioServicio.innerHTML = `<span>Precio:</span> $${precio}`;\r\n\r\n        contenedorServicio.appendChild(textoServicio);\r\n        contenedorServicio.appendChild(precioServicio);\r\n\r\n        resumen.appendChild(contenedorServicio);\r\n    });\r\n\r\n\r\n    // Calcular el total de los servicios\r\n    const serviciosSeleccionados = servicios.map( servicio => servicio.precio );\r\n\r\n    var suma = 0;\r\n    for (var i = 0; i < serviciosSeleccionados.length; i++) {\r\n        suma += parseFloat(serviciosSeleccionados[i]); // convierte el string a base 10 y lo suma\r\n    }\r\n    const totalServicio = suma.toFixed(2);\r\n\r\n    const contenedorTotalServicio = document.createElement('DIV');\r\n    contenedorTotalServicio.classList.add('contenedor-total-servicio');\r\n\r\n    const total = document.createElement('P');\r\n    total.innerHTML = `<span>Total:</span> $${totalServicio}`;\r\n    \r\n    contenedorTotalServicio.appendChild(total);\r\n    resumen.appendChild(contenedorTotalServicio);\r\n\r\n    // Heading para cita en Resumen\r\n    const headingCita = document.createElement('H3');\r\n    headingCita.textContent = \"Resumen de la cita\";\r\n    resumen.appendChild(headingCita);\r\n\r\n    const nombreCliente = document.createElement('P');\r\n    nombreCliente.innerHTML = `<span>Nombre:</span> ${nombre}`;\r\n\r\n\r\n    // Formatear la fecha en español\r\n    const fechaObj = new Date(fecha);\r\n    const mes = fechaObj.getMonth();\r\n    const dia = fechaObj.getDate() + 2;\r\n    const year = fechaObj.getFullYear();\r\n\r\n    const fechaUTC = new Date( Date.UTC(year, mes, dia) );\r\n    \r\n    const opciones = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\r\n    const fechaFormateada = fechaUTC.toLocaleDateString('es-CO', opciones);\r\n\r\n\r\n    const fechaCita = document.createElement('P');\r\n    fechaCita.innerHTML = `<span>Fecha:</span> ${fechaFormateada}`;\r\n\r\n    const horaCita = document.createElement('P');\r\n    horaCita.innerHTML = `<span>Hora:</span> ${hora}`;\r\n\r\n\r\n    // Boton para crear una cita \r\n    const botonReservar = document.createElement('BUTTON');\r\n    botonReservar.classList.add('boton');\r\n    botonReservar.textContent = 'Reservar Cita';\r\n    botonReservar.onclick = reservarCita;\r\n\r\n    resumen.appendChild(nombreCliente);\r\n    resumen.appendChild(fechaCita);\r\n    resumen.appendChild(horaCita);\r\n\r\n    resumen.appendChild(botonReservar);\r\n}\r\n\r\nasync function reservarCita() {\r\n    \r\n    const { id, fecha, hora, servicios } = cita;\r\n    \r\n    const idServicios = servicios.map( servicio => servicio.id ) // TODO: La diferencia entre el map y el foreach, es que el foreach solo itera y el map las coincidencias las coloca en la variable\r\n\r\n\r\n    const datos = new FormData(); //TODO: Es como el submit de un formulario\r\n    datos.append('usuarioId', id);\r\n    datos.append('fecha', fecha);\r\n    datos.append('hora', hora);\r\n    datos.append('servicios', idServicios);\r\n\r\n    // console.log([...datos]); // TODO: Con [...datos] nos permite ver lo que tiene adentro el FormData\r\n\r\n\r\n    try {\r\n        // Peticion hacia la api\r\n        const url = 'http://localhost:3000/api/citas';\r\n\r\n        const respuesta = await fetch(url, {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n\r\n        const resultado = await respuesta.json();\r\n\r\n        console.log(resultado.resultado);\r\n\r\n        if(resultado.resultado){\r\n            \r\n            Swal.fire({\r\n                icon: 'success',\r\n                title: 'Cita creada',\r\n                text: 'Tu cita fue creada correctamente',\r\n                button: 'OK'\r\n            }).then( () => {\r\n                setTimeout(() => {\r\n                    window.location.reload(); // TODO: Recarga la página después de 3 seg de haber creado la cita\r\n                }, 2000);\r\n            })\r\n        }\r\n    } catch (error) {\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error',\r\n            text: 'Hubo un error al guardar la cita'\r\n          })\r\n    }  \r\n}","document.addEventListener('DOMContentLoaded', function(){\r\n    iniciarApp();\r\n});\r\n\r\nfunction iniciarApp() {\r\n    buscarPorFecha();\r\n}\r\n\r\nfunction buscarPorFecha() {\r\n    const fechaInput = document.querySelector('fecha');\r\n    fechaInput.addEventListener('input', function(){\r\n        console.log('nueva fecha');\r\n    });\r\n}"]}